{
    "Outputs": {
        "AWSEBLoadBalancerURL": {
            "Description": "The ElasticBeanstalk ELB URL of the website",
            "Value": {
                "Fn::Join": [
                    "",
                    [
                        "http://",
                        {
                            "Fn::GetAtt": [
                                "AWSEBLoadBalancer",
                                "DNSName"
                            ]
                        }
                    ]
                ]
            }
        },
        "AWSEBRDSDatabaseProperties": {
            "Description": "Properties associated with the RDS database instance",
            "Value": {
                "Fn::Join": [
                    ",",
                    [
                        {
                            "Ref": "AWSEBRDSDatabase"
                        },
                        {
                            "Fn::GetAtt": [
                                "AWSEBRDSDatabase",
                                "Endpoint.Address"
                            ]
                        },
                        {
                            "Fn::GetAtt": [
                                "AWSEBRDSDatabase",
                                "Endpoint.Port"
                            ]
                        }
                    ]
                ]
            }
        }
    },
    "AWSTemplateFormatVersion": "2010-09-09",
    "Parameters": {
        "AWSEBDBPassword": {
            "NoEcho": "true",
            "Type": "String",
            "Description": "The master password for the DB instance.",
            "ConstraintDescription": "must contain only alphanumeric characters"
        },
        "InstanceTypeFamily": {
            "NoEcho": "true",
            "Type": "String",
            "Description": "WebServer EC2 instance type family",
            "Default": "t1"
        },
        "LogPublicationControl": {
            "NoEcho": "true",
            "Type": "String",
            "Description": "If true customer service logs will be published to S3.",
            "AllowedValues": [
                "true",
                "false"
            ],
            "ConstraintDescription": "must be Boolean.",
            "Default": "false"
        },
        "DocumentRoot": {
            "NoEcho": "true",
            "Type": "String",
            "Description": "Enables you to specify the child directory of your project that is treated as the public-facing web root. If your root document is stored in your project directory, leave this set to \"/\". If your root document is inside a child directory (e.g., <project>/public), set this value to match the child directory. Values should begin with a \"/\" character, and may NOT begin with a \".\" character.",
            "Default": ""
        },
        "InstancePort": {
            "NoEcho": "true",
            "Type": "String",
            "Description": "Listen Port",
            "Default": "80"
        },
        "DisplayErrors": {
            "NoEcho": "true",
            "Type": "String",
            "Description": "Specifies whether error messages should be part of the output. (This value is written to the php.ini file.)",
            "Default": "Off"
        },
        "AWSEBEnvironmentId": {
            "NoEcho": "true",
            "Type": "String"
        },
        "HooksPkgUrl": {
            "NoEcho": "true",
            "Type": "String",
            "Description": "URL to hooks package",
            "Default": "https://s3.dualstack.us-east-1.amazonaws.com/elasticbeanstalk-env-resources-us-east-1/stalks/eb_php_4.0.1.200177.0/lib/assets.tar.gz"
        },
        "ZlibOutputCompression": {
            "NoEcho": "true",
            "Type": "String",
            "Description": "Specifies whether PHP should use compression for output. (This value is written to the php.ini file.)",
            "Default": "Off"
        },
        "AWSEBEnvironmentName": {
            "NoEcho": "true",
            "Type": "String"
        },
        "AWSEBReferrerId": {
            "NoEcho": "true",
            "Type": "String",
            "Default": ""
        },
        "AppSource": {
            "NoEcho": "true",
            "Type": "String",
            "Description": "The url of the application source.",
            "Default": "http://s3.amazonaws.com/elasticbeanstalk-samples-us-east-1/php-newsample-app.zip"
        },
        "MaxExecutionTime": {
            "NoEcho": "true",
            "Type": "Number",
            "Description": "Sets the maximum time, in seconds, a script is allowed to run before it is terminated by the environment. This helps prevent poorly written scripts from tying up the server.",
            "Default": 60
        },
        "MemoryLimit": {
            "NoEcho": "true",
            "Type": "String",
            "Description": "Specifies the amount of memory allocated to the PHP environment. (This value is written to the php.ini file.)",
            "Default": "256M"
        },
        "AWSEBDBName": {
            "NoEcho": "true",
            "Type": "String",
            "Description": "The DB Name of the RDS instance",
            "ConstraintDescription": "must contain only alphanumeric characters",
            "Default": "ebdb"
        },
        "EnvironmentVariables": {
            "NoEcho": "true",
            "Type": "CommaDelimitedList",
            "Description": "Program environment variables.",
            "Default": ""
        },
        "AWSEBDBUser": {
            "NoEcho": "true",
            "Type": "String",
            "Description": "The name of master user for the client DB Instance.",
            "ConstraintDescription": "must begin with a letter and contain only alphanumeric characters",
            "Default": "ebroot"
        },
        "AllowUrlFopen": {
            "NoEcho": "true",
            "Type": "String",
            "Description": "Specifies whether the PHP's file functions are allowed to retrieve data from remote locations, such as websites or FTP servers. (This value is written to the php.ini file.)",
            "Default": "On"
        },
        "AWSEBAgentId": {
            "NoEcho": "true",
            "Type": "String",
            "Default": ""
        },
        "ComposerOptions": {
            "NoEcho": "true",
            "Type": "String",
            "Description": "Sets custom options to use when installing dependencies using Composer through composer.phar install",
            "Default": ""
        },
        "InstanceType": {
            "NoEcho": "true",
            "Type": "String",
            "Description": "WebServer EC2 instance type",
            "AllowedValues": [
                "t2.micro",
                "t2.small",
                "t2.medium",
                "t2.large",
                "t2.xlarge",
                "t2.2xlarge",
                "m3.medium",
                "m3.large",
                "m3.xlarge",
                "m3.2xlarge",
                "c3.large",
                "c3.xlarge",
                "c3.2xlarge",
                "c3.4xlarge",
                "c3.8xlarge",
                "t1.micro",
                "t2.nano",
                "m1.small",
                "m1.medium",
                "m1.large",
                "m1.xlarge",
                "c1.medium",
                "c1.xlarge",
                "c4.large",
                "c4.xlarge",
                "c4.2xlarge",
                "c4.4xlarge",
                "c4.8xlarge",
                "c5.large",
                "c5.xlarge",
                "c5.2xlarge",
                "c5.4xlarge",
                "c5.9xlarge",
                "c5.18xlarge",
                "m2.xlarge",
                "m2.2xlarge",
                "m2.4xlarge",
                "r4.large",
                "r4.xlarge",
                "r4.2xlarge",
                "r4.4xlarge",
                "r4.8xlarge",
                "r4.16xlarge",
                "m4.large",
                "m4.xlarge",
                "m4.2xlarge",
                "m4.4xlarge",
                "m4.10xlarge",
                "m4.16xlarge",
                "cc1.4xlarge",
                "cc2.8xlarge",
                "hi1.4xlarge",
                "hs1.8xlarge",
                "cr1.8xlarge",
                "g2.2xlarge",
                "g2.8xlarge",
                "p2.xlarge",
                "p2.8xlarge",
                "p2.16xlarge",
                "p3.2xlarge",
                "p3.8xlarge",
                "p3.16xlarge",
                "i2.xlarge",
                "i2.2xlarge",
                "i2.4xlarge",
                "i2.8xlarge",
                "i3.large",
                "i3.xlarge",
                "i3.2xlarge",
                "i3.4xlarge",
                "i3.8xlarge",
                "i3.16xlarge",
                "r3.large",
                "r3.xlarge",
                "r3.2xlarge",
                "r3.4xlarge",
                "r3.8xlarge",
                "d2.xlarge",
                "d2.2xlarge",
                "d2.4xlarge",
                "d2.8xlarge",
                "x1.16xlarge",
                "x1.32xlarge",
                "x1e.xlarge",
                "x1e.2xlarge",
                "x1e.4xlarge",
                "x1e.8xlarge",
                "x1e.16xlarge",
                "x1e.32xlarge",
                "f1.2xlarge",
                "f1.16xlarge",
                "g3.4xlarge",
                "g3.8xlarge",
                "g3.16xlarge",
                "h1.2xlarge",
                "h1.4xlarge",
                "h1.8xlarge",
                "h1.16xlarge",
                "m5.large",
                "m5.xlarge",
                "m5.2xlarge",
                "m5.4xlarge",
                "m5.12xlarge",
                "m5.24xlarge",
                "c5d.large",
                "c5d.xlarge",
                "c5d.2xlarge",
                "c5d.4xlarge",
                "c5d.9xlarge",
                "c5d.18xlarge",
                "m5d.large",
                "m5d.xlarge",
                "m5d.2xlarge",
                "m5d.4xlarge",
                "m5d.12xlarge",
                "m5d.24xlarge",
                "z1d.large",
                "z1d.xlarge",
                "z1d.2xlarge",
                "z1d.3xlarge",
                "z1d.6xlarge",
                "z1d.12xlarge",
                "r5.large",
                "r5.xlarge",
                "r5.2xlarge",
                "r5.4xlarge",
                "r5.12xlarge",
                "r5.24xlarge",
                "r5d.large",
                "r5d.xlarge",
                "r5d.2xlarge",
                "r5d.4xlarge",
                "r5d.12xlarge",
                "r5d.24xlarge"
            ],
            "ConstraintDescription": "must be a valid EC2 instance type.",
            "Default": "t1.micro"
        },
        "AWSEBEnvironmentBucket": {
            "NoEcho": "true",
            "Type": "String"
        }
    },
    "Resources": {
        "AWSEBRDSDBSecurityGroup": {
            "Properties": {
                "GroupDescription": "RDS DB VPC Security Group",
                "EC2VpcId": "vpc-bbd920c1",
                "DBSecurityGroupIngress": [
                    {
                        "EC2SecurityGroupId": {
                            "Ref": "AWSEBSecurityGroup"
                        }
                    }
                ]
            },
            "Type": "AWS::RDS::DBSecurityGroup",
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "27a9cce2-ddce-4533-95a1-7f11c071dc56"
                }
            }
        },
        "AWSEBSecurityGroupSSHIngress": {
            "Properties": {
                "CidrIp": "0.0.0.0/0",
                "FromPort": "22",
                "ToPort": "22",
                "IpProtocol": "tcp",
                "GroupId": {
                    "Ref": "AWSEBSecurityGroup"
                }
            },
            "Type": "AWS::EC2::SecurityGroupIngress"
        },
        "AWSEBAutoScalingLaunchConfiguration": {
            "Properties": {
                "KeyName": "nvirginia",
                "SecurityGroups": [
                    "sg-1766985d",
                    {
                        "Ref": "AWSEBSecurityGroup"
                    }
                ],
                "UserData": {
                    "Fn::Base64": {
                        "Fn::Join": [
                            "",
                            [
                                "Content-Type: multipart/mixed; boundary=\"===============5189065377222898407==\"",
                                "\n",
                                "MIME-Version: 1.0",
                                "\n",
                                "",
                                "\n",
                                "--===============5189065377222898407==",
                                "\n",
                                "Content-Type: text/cloud-config; charset=\"us-ascii\"",
                                "\n",
                                "MIME-Version: 1.0",
                                "\n",
                                "Content-Transfer-Encoding: 7bit",
                                "\n",
                                "Content-Disposition: attachment; filename=\"cloud-config.txt\"",
                                "\n",
                                "",
                                "\n",
                                "#cloud-config",
                                "\n",
                                "repo_upgrade: none",
                                "\n",
                                "repo_releasever: ",
                                {
                                    "Fn::FindInMap": [
                                        "ContainerMeta",
                                        "AMIMeta",
                                        "RepoReleaseVersion"
                                    ]
                                },
                                "\n",
                                {
                                    "Fn::FindInMap": [
                                        "AWSEBOptions",
                                        "options",
                                        "CloudConfigOptions"
                                    ]
                                },
                                "\n",
                                "",
                                "\n",
                                "--===============5189065377222898407==",
                                "\n",
                                "Content-Type: text/x-shellscript; charset=\"us-ascii\"",
                                "\n",
                                "MIME-Version: 1.0",
                                "\n",
                                "Content-Transfer-Encoding: 7bit",
                                "\n",
                                "Content-Disposition: attachment; filename=\"user-data.txt\"",
                                "\n\n",
                                "#!/bin/bash",
                                "\n",
                                "exec > >(tee -a /var/log/eb-cfn-init.log|logger -t [eb-cfn-init] -s 2>/dev/console) 2>&1",
                                "\n",
                                "echo [`date -u +\"%Y-%m-%dT%H:%M:%SZ\"`] Started EB User Data",
                                "\n",
                                "set -x",
                                "\n",
                                "\n\n",
                                "function sleep_delay ",
                                "\n",
                                "{",
                                "\n",
                                "  if (( $SLEEP_TIME < $SLEEP_TIME_MAX )); then ",
                                "\n",
                                "    echo Sleeping $SLEEP_TIME",
                                "\n",
                                "    sleep $SLEEP_TIME  ",
                                "\n",
                                "    SLEEP_TIME=$(($SLEEP_TIME * 2)) ",
                                "\n",
                                "  else ",
                                "\n",
                                "    echo Sleeping $SLEEP_TIME_MAX  ",
                                "\n",
                                "    sleep $SLEEP_TIME_MAX  ",
                                "\n",
                                "  fi",
                                "\n",
                                "}",
                                "\n\n",
                                "# Executing bootstrap script",
                                "\n",
                                "SLEEP_TIME=10",
                                "\n",
                                "SLEEP_TIME_MAX=3600",
                                "\n",
                                "while true; do ",
                                "\n",
                                "  curl ",
                                {
                                    "Fn::FindInMap": [
                                        "AWSEBOptions",
                                        "options",
                                        "UserDataScript"
                                    ]
                                },
                                " > /tmp/ebbootstrap.sh ",
                                "\n",
                                "  RESULT=$?",
                                "\n",
                                "  if [[ \"$RESULT\" -ne 0 ]]; then ",
                                "\n",
                                "    sleep_delay ",
                                "\n",
                                "  else",
                                "\n",
                                "    /bin/bash /tmp/ebbootstrap.sh ",
                                "    '",
                                {
                                    "Fn::FindInMap": [
                                        "AWSEBOptions",
                                        "options",
                                        "rpms"
                                    ]
                                },
                                "'",
                                "    '",
                                {
                                    "Fn::FindInMap": [
                                        "AWSEBOptions",
                                        "options",
                                        "tarballs"
                                    ]
                                },
                                "'",
                                "    '",
                                {
                                    "Fn::FindInMap": [
                                        "AWSEBOptions",
                                        "options",
                                        "ebgems"
                                    ]
                                },
                                "'",
                                "    '",
                                {
                                    "Ref": "AWSEBInstanceLaunchWaitHandle"
                                },
                                "'",
                                "    '",
                                {
                                    "Ref": "AWS::StackId"
                                },
                                "'",
                                "    '",
                                {
                                    "Ref": "AWS::Region"
                                },
                                "'",
                                "    '",
                                {
                                    "Fn::FindInMap": [
                                        "AWSEBOptions",
                                        "options",
                                        "guid"
                                    ]
                                },
                                "'",
                                "    '",
                                {
                                    "Fn::FindInMap": [
                                        "AWSEBOptions",
                                        "options",
                                        "AWSEBHealthdGroupId"
                                    ]
                                },
                                "'",
                                "    '",
                                {
                                    "Fn::FindInMap": [
                                        "AWSEBOptions",
                                        "options",
                                        "AWSEBHealthdEndpoint"
                                    ]
                                },
                                "'",
                                "    '",
                                {
                                    "Fn::FindInMap": [
                                        "AWSEBOptions",
                                        "options",
                                        "ProxyServer"
                                    ]
                                },
                                "'",
                                "    '",
                                {
                                    "Fn::FindInMap": [
                                        "AWSEBOptions",
                                        "options",
                                        "HealthdProxyLogLocation"
                                    ]
                                },
                                "'",
                                "    && ",
                                "\n",
                                "    exit 0  ",
                                "\n",
                                "  fi ",
                                "\n",
                                "done",
                                "\n\n",
                                "--===============5189065377222898407==-- ",
                                "##Ec2InstanceReplacementRequest=cf087579-aac4-11e8-8274-df68c3fb7408"
                            ]
                        ]
                    }
                },
                "ImageId": {
                    "Fn::FindInMap": [
                        "AWSEBAWSRegionArch2AMI",
                        {
                            "Ref": "AWS::Region"
                        },
                        {
                            "Fn::FindInMap": [
                                "AWSEBAWSInstanceTypeFamily2Arch",
                                {
                                    "Ref": "InstanceTypeFamily"
                                },
                                "Arch"
                            ]
                        }
                    ]
                },
                "IamInstanceProfile": "aws-elasticbeanstalk-ec2-role",
                "InstanceType": {
                    "Ref": "InstanceType"
                },
                "AssociatePublicIpAddress": "true",
                "InstanceMonitoring": false
            },
            "Type": "AWS::AutoScaling::LaunchConfiguration",
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "020160c1-0b81-432b-a906-0c3246c3add1"
                }
            }
        },
        "AWSEBLoadBalancer": {
            "Properties": {
                "SecurityGroups": [
                    {
                        "Ref": "AWSEBLoadBalancerSecurityGroup"
                    }
                ],
                "Listeners": [
                    {
                        "InstancePort": {
                            "Ref": "InstancePort"
                        },
                        "LoadBalancerPort": "80",
                        "Protocol": "HTTP"
                    }
                ],
                "Subnets": [
                    "subnet-8fec5ba1",
                    "subnet-88d3aac2"
                ],
                "Policies": [],
                "HealthCheck": {
                    "Target": {
                        "Fn::Join": [
                            "",
                            [
                                "HTTP:",
                                {
                                    "Ref": "InstancePort"
                                },
                                "/"
                            ]
                        ]
                    },
                    "UnhealthyThreshold": "5",
                    "Timeout": "5",
                    "HealthyThreshold": "3",
                    "Interval": "10"
                }
            },
            "Type": "AWS::ElasticLoadBalancing::LoadBalancer",
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "b46b3e6f-0a74-4822-8a1a-b0b820bbf3f7"
                }
            }
        },
        "AWSEBLoadBalancerSecurityGroup": {
            "Properties": {
                "GroupDescription": "Load Balancer Security Group",
                "VpcId": "vpc-bbd920c1",
                "SecurityGroupIngress": [
                    {
                        "CidrIp": "0.0.0.0/0",
                        "FromPort": "80",
                        "ToPort": "80",
                        "IpProtocol": "tcp"
                    }
                ],
                "SecurityGroupEgress": [
                    {
                        "CidrIp": "0.0.0.0/0",
                        "FromPort": "80",
                        "ToPort": "80",
                        "IpProtocol": "tcp"
                    }
                ]
            },
            "Type": "AWS::EC2::SecurityGroup",
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "7149b139-06eb-4a3b-879a-cfa9b5e8b7e1"
                }
            }
        },
        "AWSEBSecurityGroup": {
            "Properties": {
                "GroupDescription": "VPC Security Group",
                "VpcId": "vpc-bbd920c1",
                "SecurityGroupIngress": [
                    {
                        "FromPort": "80",
                        "ToPort": "80",
                        "IpProtocol": "tcp",
                        "SourceSecurityGroupId": {
                            "Ref": "AWSEBLoadBalancerSecurityGroup"
                        }
                    }
                ]
            },
            "Type": "AWS::EC2::SecurityGroup",
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "a3d701db-6fc5-48d3-930f-5b38e75f3b66"
                }
            }
        },
        "AWSEBAutoScalingScaleDownPolicy": {
            "Properties": {
                "ScalingAdjustment": "-1",
                "AutoScalingGroupName": {
                    "Ref": "AWSEBAutoScalingGroup"
                },
                "AdjustmentType": "ChangeInCapacity"
            },
            "Type": "AWS::AutoScaling::ScalingPolicy",
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "f7ea72f3-fa7f-4baa-ba23-9ad7a4c89a82"
                }
            }
        },
        "AWSEBInstanceLaunchWaitHandle": {
            "Type": "AWS::CloudFormation::WaitConditionHandle",
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "88b87df4-fca2-4aa8-b0b3-2053f149fd2c"
                }
            }
        },
        "AWSEBRDSDatabase": {
            "Type": "AWS::RDS::DBInstance",
            "DeletionPolicy": "Delete",
            "Properties": {
                "MasterUserPassword": {
                    "Ref": "AWSEBDBPassword"
                },
                "DBInstanceClass": "db.t2.micro",
                "DBSecurityGroups": [
                    {
                        "Ref": "AWSEBRDSDBSecurityGroup"
                    }
                ],
                "MasterUsername": {
                    "Ref": "AWSEBDBUser"
                },
                "DBName": {
                    "Ref": "AWSEBDBName"
                },
                "DBSubnetGroupName": {
                    "Ref": "AWSEBRDSDBSubnetGroup"
                },
                "MultiAZ": false,
                "Engine": "mysql",
                "AllocatedStorage": 5
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "e0efa243-5e86-4f3a-ac76-0c592f46ca73"
                }
            }
        },
        "AWSEBAutoScalingGroup": {
            "Metadata": {
                "ForcingMetadataUpdate": "Changing something in the metadata will force re-compuation",
                "AWS::ElasticBeanstalk::Ext": {
                    "_AppSourceUrlFileContent": {
                        "url": {
                            "Ref": "AppSource"
                        }
                    },
                    "_TriggersConfig": {
                        "configDeploy": {
                            "_Command": "CMD-ConfigDeploy",
                            "_WatchGroups": [
                                "_TriggerConfigDeployment"
                            ]
                        },
                        "applicationDeploy": {
                            "_Command": "CMD-AppDeploy",
                            "_WatchGroups": [
                                "_TriggerAppDeployment"
                            ]
                        }
                    },
                    "_ParameterTriggers": {
                        "_TriggerConfigDeployment": [
                            "EnvironmentVariables",
                            "InstancePort",
                            "LogPublicationControl",
                            "DocumentRoot",
                            "MemoryLimit",
                            "ZlibOutputCompression",
                            "AllowUrlFopen",
                            "DisplayErrors",
                            "MaxExecutionTime",
                            "ComposerOptions",
                            "AWSEBDBUser",
                            "AWSEBDBPassword",
                            "AWSEBDBName"
                        ],
                        "_TriggerAppDeployment": [
                            "AppSource"
                        ]
                    },
                    "_ContainerConfigFileContent": {
                        "container": {
                            "app_logs_dir": "/var/app/support/logs",
                            "config_staging_dir": "/tmp",
                            "php_version": {
                                "Fn::FindInMap": [
                                    "AWSEBOptions",
                                    "options",
                                    "PhpVersion"
                                ]
                            },
                            "app_support_dir": "/var/app/support",
                            "app_pids_dir": "/var/app/support/pids",
                            "log_group_name_prefix": "/aws/elasticbeanstalk",
                            "http_port": "80",
                            "app_base_dir": "/var/app",
                            "app_deploy_dir": "/var/app/current",
                            "app_user": "webapp",
                            "app_staging_dir": "/var/app/ondeck",
                            "app_assets_dir": "/var/app/support/assets",
                            "instance_port": {
                                "Ref": "InstancePort"
                            },
                            "default_log_list": [
                                "/var/log/httpd/error_log",
                                "/var/log/httpd/access_log"
                            ],
                            "source_bundle": "/opt/elasticbeanstalk/deploy/appsource/source_bundle",
                            "common_log_list": [
                                "/var/log/eb-activity.log"
                            ]
                        },
                        "optionsettings": {
                            "aws:elasticbeanstalk:container:php:phpini": {
                                "display_errors": {
                                    "Ref": "DisplayErrors"
                                },
                                "document_root": {
                                    "Ref": "DocumentRoot"
                                },
                                "composer_options": {
                                    "Ref": "ComposerOptions"
                                },
                                "allow_url_fopen": {
                                    "Ref": "AllowUrlFopen"
                                },
                                "zlib_output_compression": {
                                    "Ref": "ZlibOutputCompression"
                                },
                                "memory_limit": {
                                    "Ref": "MemoryLimit"
                                },
                                "max_execution_time": {
                                    "Ref": "MaxExecutionTime"
                                }
                            },
                            "aws:elasticbeanstalk:application:environment": {
                                "Ref": "EnvironmentVariables"
                            },
                            "aws:elasticbeanstalk:hostmanager": {
                                "LogPublicationControl": {
                                    "Ref": "LogPublicationControl"
                                }
                            }
                        },
                        "system": {
                            "LogPublicationControl": {
                                "Ref": "LogPublicationControl"
                            },
                            "AWSEBAgentId": {
                                "Ref": "AWSEBAgentId"
                            },
                            "AWSEBReferrerId": {
                                "Ref": "AWSEBReferrerId"
                            }
                        },
                        "plugins": {
                            "rds": {
                                "Description": "RDS Environment variables",
                                "env": {
                                    "RDS_PASSWORD": {
                                        "Ref": "AWSEBDBPassword"
                                    },
                                    "RDS_HOSTNAME": {
                                        "Fn::GetAtt": [
                                            "AWSEBRDSDatabase",
                                            "Endpoint.Address"
                                        ]
                                    },
                                    "RDS_PORT": {
                                        "Fn::GetAtt": [
                                            "AWSEBRDSDatabase",
                                            "Endpoint.Port"
                                        ]
                                    },
                                    "RDS_DB_NAME": {
                                        "Ref": "AWSEBDBName"
                                    },
                                    "RDS_USERNAME": {
                                        "Ref": "AWSEBDBUser"
                                    }
                                }
                            }
                        },
                        "commands": {
                            "CMD-TailLogs": {
                                "persistent_configuration": true,
                                "stages": [
                                    {
                                        "name": "TailLogs",
                                        "actions": [
                                            {
                                                "name": "TailLogs",
                                                "type": "sh",
                                                "value": "tailLogs.py --concatenate --conf-path '/opt/elasticbeanstalk/tasks/taillogs.d/*' --location-prefix 'resources/environments/logs/tail/'"
                                            }
                                        ]
                                    }
                                ]
                            },
                            "CMD-PreInit": {
                                "refresh_manifest": true,
                                "stages": [
                                    {
                                        "name": "PreInitStage0",
                                        "actions": [
                                            {
                                                "name": "DownloadSourceBundle",
                                                "type": "infra",
                                                "value": "/opt/elasticbeanstalk/bin/download-source-bundle"
                                            },
                                            {
                                                "name": "PreInitHook",
                                                "type": "hook",
                                                "value": "preinit"
                                            }
                                        ]
                                    }
                                ]
                            },
                            "CMD-Startup": {
                                "stages": [
                                    {
                                        "name": "StartupStage0",
                                        "actions": [
                                            {
                                                "name": "HealthdLogRotation",
                                                "type": "infra",
                                                "value": "infra-healthd_log_rotation.rb"
                                            },
                                            {
                                                "name": "HealthdHTTPDLogging",
                                                "type": "infra",
                                                "value": "infra-healthd_httpd_logging.rb"
                                            },
                                            {
                                                "name": "HealthdNginxLogging",
                                                "type": "infra",
                                                "value": "infra-healthd_nginx_logging.rb"
                                            },
                                            {
                                                "name": "EbExtensionPreBuild",
                                                "type": "infra",
                                                "value": "infra-embedded_prebuild.rb"
                                            },
                                            {
                                                "name": "AppDeployPreHook",
                                                "type": "hook",
                                                "value": "appdeploy/pre"
                                            },
                                            {
                                                "name": "EbExtensionPostBuild",
                                                "type": "infra",
                                                "value": "infra-embedded_postbuild.rb"
                                            },
                                            {
                                                "name": "InfraCleanEbExtension",
                                                "type": "infra",
                                                "value": "infra-clean_ebextensions_dir.rb"
                                            }
                                        ]
                                    },
                                    {
                                        "name": "StartupStage1",
                                        "actions": [
                                            {
                                                "name": "AppDeployEnactHook",
                                                "type": "hook",
                                                "value": "appdeploy/enact"
                                            },
                                            {
                                                "name": "AppDeployPostHook",
                                                "type": "hook",
                                                "value": "appdeploy/post"
                                            },
                                            {
                                                "name": "PostInitHook",
                                                "type": "hook",
                                                "value": "postinit"
                                            }
                                        ]
                                    }
                                ]
                            },
                            "CMD-PublishLogs": {
                                "persistent_configuration": true,
                                "stages": [
                                    {
                                        "name": "PublishLogs",
                                        "actions": [
                                            {
                                                "name": "PublishLogs",
                                                "type": "sh",
                                                "value": "publishLogs.py --de-dupe --conf-path '/opt/elasticbeanstalk/tasks/publishlogs.d/*' --location-prefix 'resources/environments/logs/publish/' --num-concurrent 2"
                                            }
                                        ]
                                    }
                                ]
                            },
                            "CMD-ImmutableDeploymentFlip": {
                                "persistent_configuration": true,
                                "stages": [
                                    {
                                        "name": "ImmutableDeploymentFlip",
                                        "actions": [
                                            {
                                                "name": "FlipCommandRegistration",
                                                "type": "infra",
                                                "value": "infra-reregister-cfn-hup.rb"
                                            }
                                        ]
                                    }
                                ]
                            },
                            "CMD-AppDeploy": {
                                "refresh_manifest": true,
                                "stages": [
                                    {
                                        "name": "AppDeployStage0",
                                        "actions": [
                                            {
                                                "name": "DownloadSourceBundle",
                                                "type": "infra",
                                                "value": "/opt/elasticbeanstalk/bin/download-source-bundle"
                                            },
                                            {
                                                "name": "EbExtensionPreBuild",
                                                "type": "infra",
                                                "value": "infra-embedded_prebuild.rb"
                                            },
                                            {
                                                "name": "AppDeployPreHook",
                                                "type": "hook",
                                                "value": "appdeploy/pre"
                                            },
                                            {
                                                "name": "EbExtensionPostBuild",
                                                "type": "infra",
                                                "value": "infra-embedded_postbuild.rb"
                                            },
                                            {
                                                "name": "InfraCleanEbextension",
                                                "type": "infra",
                                                "value": "infra-clean_ebextensions_dir.rb"
                                            }
                                        ]
                                    },
                                    {
                                        "name": "AppDeployStage1",
                                        "actions": [
                                            {
                                                "name": "AppDeployEnactHook",
                                                "type": "hook",
                                                "value": "appdeploy/enact"
                                            },
                                            {
                                                "name": "AppDeployPostHook",
                                                "type": "hook",
                                                "value": "appdeploy/post"
                                            }
                                        ]
                                    }
                                ]
                            },
                            "CMD-BundleLogs": {
                                "persistent_configuration": true,
                                "stages": [
                                    {
                                        "name": "BundleLogs",
                                        "actions": [
                                            {
                                                "name": "BundleLogs",
                                                "type": "sh",
                                                "value": "bundleLogs.py --conf-path '/opt/elasticbeanstalk/tasks/bundlelogs.d/*' --location-prefix 'resources/environments/logs/bundle/'"
                                            }
                                        ]
                                    }
                                ]
                            },
                            "CMD-SelfStartup": {
                                "stages": [
                                    {
                                        "name": "StartupStage0",
                                        "actions": [
                                            {
                                                "name": "HealthdLogRotation",
                                                "type": "infra",
                                                "value": "infra-healthd_log_rotation.rb"
                                            },
                                            {
                                                "name": "HealthdHTTPDLogging",
                                                "type": "infra",
                                                "value": "infra-healthd_httpd_logging.rb"
                                            },
                                            {
                                                "name": "HealthdNginxLogging",
                                                "type": "infra",
                                                "value": "infra-healthd_nginx_logging.rb"
                                            },
                                            {
                                                "name": "EbExtensionPreBuild",
                                                "type": "infra",
                                                "value": "infra-embedded_prebuild.rb"
                                            },
                                            {
                                                "name": "AppDeployPreHook",
                                                "type": "hook",
                                                "value": "appdeploy/pre"
                                            },
                                            {
                                                "name": "EbExtensionPostBuild",
                                                "type": "infra",
                                                "value": "infra-embedded_postbuild.rb"
                                            },
                                            {
                                                "name": "InfraCleanEbextension",
                                                "type": "infra",
                                                "value": "infra-clean_ebextensions_dir.rb"
                                            }
                                        ]
                                    },
                                    {
                                        "name": "StartupStage1",
                                        "actions": [
                                            {
                                                "name": "AppDeployEnactHook",
                                                "type": "hook",
                                                "value": "appdeploy/enact"
                                            },
                                            {
                                                "name": "AppDeployPostHook",
                                                "type": "hook",
                                                "value": "appdeploy/post"
                                            },
                                            {
                                                "name": "PostInitHook",
                                                "type": "hook",
                                                "value": "postinit"
                                            }
                                        ]
                                    }
                                ]
                            },
                            "CMD-SystemTailLogs": {
                                "persistent_configuration": true,
                                "stages": [
                                    {
                                        "name": "SystemTailLogs",
                                        "actions": [
                                            {
                                                "name": "SystemTailLogs",
                                                "type": "sh",
                                                "value": "tailLogs.py --concatenate --conf-path '/opt/elasticbeanstalk/tasks/systemtaillogs.d/*' --location-prefix 'resources/environments/logs/systemtail/'"
                                            }
                                        ]
                                    }
                                ]
                            },
                            "CMD-RestartAppServer": {
                                "stages": [
                                    {
                                        "name": "RestartAppServerStage0",
                                        "actions": [
                                            {
                                                "name": "RestartAppServerPreHook",
                                                "type": "hook",
                                                "value": "restartappserver/pre"
                                            }
                                        ]
                                    },
                                    {
                                        "name": "RestartAppServerStage1",
                                        "actions": [
                                            {
                                                "name": "RestartAppServerEnactHook",
                                                "type": "hook",
                                                "value": "restartappserver/enact"
                                            },
                                            {
                                                "name": "RestartAppServerPostHook",
                                                "type": "hook",
                                                "value": "restartappserver/post"
                                            }
                                        ]
                                    }
                                ]
                            },
                            "CMD-ConfigDeploy": {
                                "refresh_manifest": true,
                                "stages": [
                                    {
                                        "name": "ConfigDeployStage0",
                                        "actions": [
                                            {
                                                "name": "ConfigDeployPreHook",
                                                "type": "hook",
                                                "value": "configdeploy/pre"
                                            }
                                        ]
                                    },
                                    {
                                        "name": "ConfigDeployStage1",
                                        "actions": [
                                            {
                                                "name": "ConfigDeployEnactHook",
                                                "type": "hook",
                                                "value": "configdeploy/enact"
                                            },
                                            {
                                                "name": "ConfigDeployPostHook",
                                                "type": "hook",
                                                "value": "configdeploy/post"
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    },
                    "_LaunchS3URL": "https://s3.amazonaws.com/elasticbeanstalk-us-east-1-856813880062/resources/environments/e-smyb7aynmq/Myapp1-env_LaunchFile",
                    "_EBExtensionFilePaths": {
                        "prebuild_0_myAPP1": ".ebextensions/logging.config",
                        "prebuild_1_myAPP1": "cron.yaml"
                    },
                    "_API": {
                        "_Commands": {
                            "CMD-TailLogs": {
                                "_Stages": {
                                    "01_enact": [
                                        "InfoTask-TailLogs"
                                    ]
                                }
                            },
                            "CMD-Startup": {
                                "_RunStaged": "true",
                                "_Stages": {
                                    "01_pre": [],
                                    "02_enact": []
                                }
                            },
                            "CMD-AppDeploy": {
                                "_RunStaged": "true",
                                "_Stages": {
                                    "01_pre": [],
                                    "02_enact": []
                                }
                            },
                            "CMD-BundleLogs": {
                                "_Stages": {
                                    "01_enact": [
                                        "InfoTask-BundleLogs"
                                    ]
                                }
                            },
                            "CMD-SystemTailLogs": {
                                "_Stages": {
                                    "01_enact": [
                                        "InfoTask-SystemTailLogs"
                                    ]
                                }
                            },
                            "CMD-PatchInstance": {
                                "_Stages": {
                                    "01_enact": [
                                        "_Infra-PatchInstance"
                                    ]
                                }
                            },
                            "CMD-RestartAppServer": {
                                "_RunStaged": "false",
                                "_Stages": {
                                    "01_enact": [],
                                    "02_enact": []
                                }
                            },
                            "CMD-ConfigDeploy": {
                                "_RunStaged": "true",
                                "_Stages": {
                                    "01_pre": [],
                                    "02_enact": []
                                }
                            }
                        }
                    },
                    "AvailabilityZoneCount": "Any",
                    "InstanceSignalURL": {
                        "Ref": "AWSEBInstanceLaunchWaitHandle"
                    },
                    "_EnvironmentInfoTaskMapping": "EnvironmentInfoTasks"
                },
                "AWS::CloudFormation::Init": {
                    "Infra-WriteTailLogsConf": {
                        "files": {
                            "/opt/elasticbeanstalk/tasks/taillogs.d/eb-activity.conf": {
                                "mode": "000644",
                                "content": {
                                    "Fn::Join": [
                                        "\n",
                                        [
                                            "/var/log/eb-commandprocessor.log",
                                            "/var/log/eb-activity.log",
                                            ""
                                        ]
                                    ]
                                }
                            },
                            "/opt/elasticbeanstalk/tasks/taillogs.d/eb-version-deployment.conf": {
                                "content": {
                                    "Fn::Join": [
                                        "\n",
                                        [
                                            "/var/log/eb-version-deployment.log",
                                            ""
                                        ]
                                    ]
                                }
                            }
                        }
                    },
                    "Infra-WriteBundleLogsConf": {
                        "files": {
                            "/opt/elasticbeanstalk/tasks/bundlelogs.d/eb-system.conf": {
                                "mode": "000644",
                                "content": {
                                    "Fn::Join": [
                                        "\n",
                                        [
                                            "/var/log/eb-cfn-init*",
                                            "/var/log/eb-tools*",
                                            "/var/log/eb-publish-logs*",
                                            "/var/log/eb-commandprocessor*",
                                            "/var/log/eb-activity*",
                                            ""
                                        ]
                                    ]
                                }
                            },
                            "/opt/elasticbeanstalk/tasks/bundlelogs.d/cfn-system.conf": {
                                "mode": "000644",
                                "content": {
                                    "Fn::Join": [
                                        "\n",
                                        [
                                            "/var/log/cfn-hup*",
                                            "/var/log/cfn-init*",
                                            "/var/log/cfn-wire*",
                                            ""
                                        ]
                                    ]
                                }
                            },
                            "/opt/elasticbeanstalk/tasks/bundlelogs.d/eb-version-deployment.conf": {
                                "content": {
                                    "Fn::Join": [
                                        "\n",
                                        [
                                            "/var/log/eb-version-deployment.log",
                                            ""
                                        ]
                                    ]
                                }
                            },
                            "/opt/elasticbeanstalk/tasks/bundlelogs.d/cloud-init-system.conf": {
                                "mode": "000644",
                                "content": {
                                    "Fn::Join": [
                                        "\n",
                                        [
                                            "/var/log/cloud-init*",
                                            ""
                                        ]
                                    ]
                                }
                            },
                            "/opt/elasticbeanstalk/tasks/bundlelogs.d/system.conf": {
                                "mode": "000644",
                                "content": {
                                    "Fn::Join": [
                                        "\n",
                                        [
                                            "/var/log/cron",
                                            "/var/log/messages",
                                            "/var/log/yum.log",
                                            ""
                                        ]
                                    ]
                                }
                            }
                        }
                    },
                    "prebuild_0_myAPP1": {
                        "files": {
                            "/opt/elasticbeanstalk/tasks/taillogs.d/01-sample-app.conf": {
                                "content": "/tmp/sample-app.log\n"
                            },
                            "/opt/elasticbeanstalk/tasks/bundlelogs.d/01-sample-app.conf": {
                                "content": "/tmp/sample-app*\n"
                            }
                        }
                    },
                    "prebuild_1_myAPP1": {
                        "cron": [
                            {
                                "schedule": "*/1 * * * *",
                                "name": "task1",
                                "url": "/scheduled.php"
                            }
                        ],
                        "version": 1
                    },
                    "InfoTask-TailLogs": {
                        "commands": {
                            "taillogs": {
                                "command": {
                                    "Fn::Join": [
                                        "",
                                        [
                                            "tailLogs.py --concatenate --conf-path '/opt/elasticbeanstalk/tasks/taillogs.d/*' --location-prefix ",
                                            {
                                                "Fn::FindInMap": [
                                                    "EnvironmentInfoTasks",
                                                    "tail",
                                                    "LocationPrefix"
                                                ]
                                            }
                                        ]
                                    ]
                                }
                            }
                        }
                    },
                    "Infra-WriteLeaderTestScript": {
                        "files": {
                            "/opt/elasticbeanstalk/bin/leader-test.sh": {
                                "mode": "000755",
                                "content": {
                                    "Fn::Join": [
                                        "",
                                        [
                                            "#!/bin/bash",
                                            "\n",
                                            "if [[ \"$EB_IS_COMMAND_LEADER\" == \"true\" ]]; then ",
                                            "\n",
                                            "  exit 0 ",
                                            "\n",
                                            "else  ",
                                            "\n",
                                            "  exit 1 ",
                                            "\n",
                                            "fi ",
                                            "\n"
                                        ]
                                    ]
                                }
                            }
                        }
                    },
                    "InfoTask-BundleLogs": {
                        "commands": {
                            "bundlelogs": {
                                "command": {
                                    "Fn::Join": [
                                        "",
                                        [
                                            "bundleLogs.py --conf-path '/opt/elasticbeanstalk/tasks/bundlelogs.d/*' --location-prefix ",
                                            {
                                                "Fn::FindInMap": [
                                                    "EnvironmentInfoTasks",
                                                    "bundle",
                                                    "LocationPrefix"
                                                ]
                                            }
                                        ]
                                    ]
                                }
                            }
                        }
                    },
                    "AWSEBBaseConfig": {
                        "files": {
                            "/etc/cfn/cfn-hup.conf": {
                                "mode": "000400",
                                "owner": "root",
                                "content": {
                                    "Fn::Join": [
                                        "",
                                        [
                                            "[main]",
                                            "\n",
                                            "stack=",
                                            {
                                                "Ref": "AWS::StackId"
                                            },
                                            "\n",
                                            "region=",
                                            {
                                                "Ref": "AWS::Region"
                                            },
                                            "\n",
                                            "verbose=true\n",
                                            "multi-threaded=false\n"
                                        ]
                                    ]
                                },
                                "group": "root"
                            },
                            "/etc/elasticbeanstalk/.aws-eb-stack.properties": {
                                "mode": "000440",
                                "owner": "root",
                                "content": {
                                    "Fn::Join": [
                                        "",
                                        [
                                            "environment_id=",
                                            {
                                                "Ref": "AWSEBEnvironmentId"
                                            },
                                            "\n",
                                            "environment_bucket=",
                                            {
                                                "Ref": "AWSEBEnvironmentBucket"
                                            },
                                            "\n",
                                            "stack_name=",
                                            {
                                                "Ref": "AWS::StackId"
                                            },
                                            "\n",
                                            "resource=",
                                            "AWSEBAutoScalingGroup",
                                            "\n",
                                            "region=",
                                            {
                                                "Ref": "AWS::Region"
                                            },
                                            "\n\n"
                                        ]
                                    ]
                                },
                                "group": "root"
                            },
                            "/etc/init/cfn-hup.conf": {
                                "mode": "000400",
                                "owner": "root",
                                "content": {
                                    "Fn::Join": [
                                        "\n",
                                        [
                                            "stop on runlevel [016]",
                                            "respawn",
                                            "script",
                                            "  /opt/aws/bin/cfn-hup",
                                            "end script"
                                        ]
                                    ]
                                },
                                "group": "root"
                            },
                            "/etc/cfn/hooks.d/aws-eb-command-handler.conf": {
                                "content": {
                                    "Fn::Join": [
                                        "",
                                        [
                                            "[aws-eb-command-handler]",
                                            "\n",
                                            "triggers=on.command",
                                            "\n",
                                            "path=ElasticBeanstalkCommand-",
                                            "AWSEBAutoScalingGroup",
                                            "\n",
                                            "action=/opt/elasticbeanstalk/bin/command-processor",
                                            "\n"
                                        ]
                                    ]
                                }
                            }
                        },
                        "commands": {
                            "clearbackupfiles": {
                                "command": "rm -f /etc/cfn/hooks.d/*.bak"
                            }
                        }
                    },
                    "Hook-PreAppDeploy": {
                        "commands": {
                            "hooks": {
                                "command": "echo place holder"
                            }
                        }
                    },
                    "InfoTask-SystemTailLogs": {
                        "commands": {
                            "systemtaillogs": {
                                "command": {
                                    "Fn::Join": [
                                        "",
                                        [
                                            "tailLogs.py --conf-path '/opt/elasticbeanstalk/tasks/systemtaillogs.d/*' --location-prefix ",
                                            {
                                                "Fn::FindInMap": [
                                                    "EnvironmentInfoTasks",
                                                    "systemtail",
                                                    "LocationPrefix"
                                                ]
                                            }
                                        ]
                                    ]
                                }
                            }
                        }
                    },
                    "AWSEBMessageOfTheDay": {
                        "files": {
                            "/tmp/10eb-banner": {
                                "mode": "000755",
                                "owner": "root",
                                "content": {
                                    "Fn::Join": [
                                        "",
                                        [
                                            "cat << EOF",
                                            "\n",
                                            " _____ _           _   _      ____                       _        _ _",
                                            "\n",
                                            "| ____| | __ _ ___| |_(_) ___| __ )  ___  __ _ _ __  ___| |_ __ _| | | __",
                                            "\n",
                                            "|  _| | |/ _\\` / __| __| |/ __|  _ \\ / _ \\/ _\\` | '_ \\/ __| __/ _\\` | | |/ /",
                                            "\n",
                                            "| |___| | (_| \\__ \\ |_| | (__| |_) |  __/ (_| | | | \\__ \\ || (_| | |   <",
                                            "\n",
                                            "|_____|_|\\__,_|___/\\__|_|\\___|____/ \\___|\\__,_|_| |_|___/\\__\\__,_|_|_|\\_\\\\",
                                            "\n",
                                            "                                       Amazon Linux AMI",
                                            "\n",
                                            "\n",
                                            "This EC2 instance is managed by AWS Elastic Beanstalk. Changes made via SSH ",
                                            "\n",
                                            "WILL BE LOST if the instance is replaced by auto-scaling. For more information ",
                                            "\n",
                                            "on customizing your Elastic Beanstalk environment, see our documentation here: ",
                                            "\n",
                                            "http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html",
                                            "\n",
                                            "EOF",
                                            "\n"
                                        ]
                                    ]
                                },
                                "group": "root"
                            }
                        },
                        "commands": {
                            "01clearoriginal": {
                                "command": "rm -f /etc/update-motd.d/*"
                            },
                            "02createbanner": {
                                "command": "mv /tmp/10eb-banner /etc/update-motd.d/10eb-banner"
                            },
                            "03updatebanner": {
                                "command": "/usr/sbin/update-motd"
                            }
                        }
                    },
                    "Infra-WriteSystemTailLogsConf": {
                        "files": {
                            "/opt/elasticbeanstalk/tasks/systemtaillogs.d/eb-system.conf": {
                                "mode": "000644",
                                "content": {
                                    "Fn::Join": [
                                        "\n",
                                        [
                                            "/var/log/eb-cfn-init.log",
                                            "/var/log/eb-tools.log",
                                            "/var/log/eb-publish-logs.log",
                                            "/var/log/eb-commandprocessor.log",
                                            "/var/log/eb-activity.log",
                                            ""
                                        ]
                                    ]
                                }
                            },
                            "/opt/elasticbeanstalk/tasks/systemtaillogs.d/eb-version-deployment.conf": {
                                "content": {
                                    "Fn::Join": [
                                        "\n",
                                        [
                                            "/var/log/eb-version-deployment.log",
                                            ""
                                        ]
                                    ]
                                }
                            },
                            "/opt/elasticbeanstalk/tasks/systemtaillogs.d/cfn-system.conf": {
                                "mode": "000644",
                                "content": {
                                    "Fn::Join": [
                                        "\n",
                                        [
                                            "/var/log/cfn-hup.log",
                                            "/var/log/cfn-init.log",
                                            ""
                                        ]
                                    ]
                                }
                            },
                            "/opt/elasticbeanstalk/tasks/systemtaillogs.d/system.conf": {
                                "mode": "000644",
                                "content": {
                                    "Fn::Join": [
                                        "\n",
                                        [
                                            "/var/log/cron",
                                            "/var/log/messages",
                                            "/var/log/yum.log",
                                            ""
                                        ]
                                    ]
                                }
                            },
                            "/opt/elasticbeanstalk/tasks/systemtaillogs.d/cloud-init-system.conf": {
                                "mode": "000644",
                                "content": {
                                    "Fn::Join": [
                                        "\n",
                                        [
                                            "/var/log/cloud-init.log",
                                            ""
                                        ]
                                    ]
                                }
                            }
                        }
                    },
                    "Infra-PatchInstance": {
                        "files": {
                            "/opt/elasticbeanstalk/bin/patch_instance": {
                                "mode": "000750",
                                "owner": "root",
                                "source": {
                                    "Fn::Select": [
                                        0,
                                        {
                                            "Fn::FindInMap": [
                                                "AWSEBOptions",
                                                "options",
                                                "ebpatchscripturl"
                                            ]
                                        }
                                    ]
                                },
                                "group": "root"
                            }
                        },
                        "commands": {
                            "01executepatch": {
                                "command": "/opt/elasticbeanstalk/bin/patch_instance"
                            }
                        }
                    },
                    "Infra-InstallContainerHooksPkg": {
                        "commands": {
                            "01download_container_hooks": {
                                "command": {
                                    "Fn::Join": [
                                        "",
                                        [
                                            "curl -sS --retry 3 '",
                                            {
                                                "Ref": "HooksPkgUrl"
                                            },
                                            "' -o /tmp/hooks.tar.gz"
                                        ]
                                    ]
                                }
                            },
                            "03cleanup": {
                                "command": "rm -f /tmp/hooks.tar.gz"
                            },
                            "00mkdir": {
                                "command": "mkdir -p /opt/elasticbeanstalk"
                            },
                            "02install_container_hooks": {
                                "command": "tar zxf /tmp/hooks.tar.gz --no-same-owner --no-same-permission -C /opt/elasticbeanstalk"
                            }
                        }
                    },
                    "Infra-WritePublishLogsCron": {
                        "files": {
                            "/etc/cron.d/publishlogs": {
                                "mode": "000644",
                                "content": {
                                    "Fn::Join": [
                                        "",
                                        [
                                            "SHELL=/bin/bash",
                                            "\n",
                                            "PATH=/sbin:/bin:/usr/sbin:/usr/bin",
                                            "\n",
                                            "MAILTO=\"\"",
                                            "\n",
                                            "HOME=/",
                                            "\n",
                                            "10,30,50 * * * * root ",
                                            "publishLogs.py --de-dupe --conf-path '/opt/elasticbeanstalk/tasks/publishlogs.d/*' --location-prefix ",
                                            {
                                                "Fn::FindInMap": [
                                                    "EnvironmentInfoTasks",
                                                    "publish",
                                                    "LocationPrefix"
                                                ]
                                            },
                                            " --num-concurrent 2",
                                            "\n",
                                            "05,25,45 * * * * root ",
                                            "clearStaleLogPublishingRecords.py",
                                            "\n"
                                        ]
                                    ]
                                }
                            }
                        }
                    },
                    "Infra-WriteApplication1": {
                        "commands": {
                            "01mkdir": {
                                "command": "rm -rf /opt/elasticbeanstalk/deploy/appsource/; mkdir -p /opt/elasticbeanstalk/deploy/appsource/"
                            }
                        }
                    },
                    "configSets": {
                        "Infra-WriteTailLogsConf": [
                            "Infra-WriteTailLogsConf"
                        ],
                        "Infra-WriteBundleLogsConf": [
                            "Infra-WriteBundleLogsConf"
                        ],
                        "InfoTask-TailLogs": [
                            "InfoTask-TailLogs"
                        ],
                        "InfoTask-BundleLogs": [
                            "InfoTask-BundleLogs"
                        ],
                        "_OnInstanceReboot": [
                            "AWSEBBaseConfig"
                        ],
                        "_AppInstall": [
                            "prebuild_0_myAPP1",
                            "prebuild_1_myAPP1",
                            "Hook-PreAppDeploy"
                        ],
                        "Infra-EmbeddedPreBuild": [
                            "prebuild_0_myAPP1",
                            "prebuild_1_myAPP1"
                        ],
                        "Hook-PreAppDeploy": [
                            "Hook-PreAppDeploy"
                        ],
                        "InfoTask-SystemTailLogs": [
                            "InfoTask-SystemTailLogs"
                        ],
                        "Infra-WriteSystemTailLogsConf": [
                            "Infra-WriteSystemTailLogsConf"
                        ],
                        "_OnInstanceBoot": [
                            "AWSEBBaseConfig",
                            "AWSEBMessageOfTheDay",
                            "AWSEBULimitConfig",
                            "Infra-InstallContainerHooksPkg",
                            "Infra-WriteLeaderTestScript",
                            "Infra-WriteTailLogsConf",
                            "Infra-WriteSystemTailLogsConf",
                            "Infra-WriteBundleLogsConf",
                            "Infra-WritePublishLogsConf",
                            "Infra-WritePublishLogsCron"
                        ],
                        "Infra-EmbeddedPostBuild": [],
                        "Infra-WritePublishLogsCron": [
                            "Infra-WritePublishLogsCron"
                        ],
                        "Infra-WriteApplication1": [
                            "Infra-WriteApplication1"
                        ],
                        "Infra-WriteApplication2": [
                            "Infra-WriteApplication2"
                        ],
                        "Infra-WritePublishLogsConf": [
                            "Infra-WritePublishLogsConf"
                        ],
                        "_Infra-PatchInstance": [
                            "Infra-PatchInstance"
                        ]
                    },
                    "Infra-WriteApplication2": {
                        "files": {
                            "/opt/elasticbeanstalk/bin/download_source_bundle": {
                                "owner": "root",
                                "mode": "000750",
                                "source": {
                                    "Fn::Select": [
                                        0,
                                        {
                                            "Fn::FindInMap": [
                                                "AWSEBOptions",
                                                "options",
                                                "downloadSourceBundleScriptLocation"
                                            ]
                                        }
                                    ]
                                },
                                "group": "root"
                            }
                        },
                        "commands": {
                            "01downloadVersion": {
                                "command": "/opt/elasticbeanstalk/bin/download_source_bundle"
                            },
                            "02deleteVersionDownloadScriptFile": {
                                "command": "rm /opt/elasticbeanstalk/bin/download_source_bundle"
                            }
                        }
                    },
                    "Infra-WritePublishLogsConf": {
                        "files": {}
                    },
                    "AWSEBULimitConfig": {
                        "files": {
                            "/etc/elasticbeanstalk/set-ulimit.sh": {
                                "mode": "000755",
                                "owner": "root",
                                "content": {
                                    "Fn::Join": [
                                        "",
                                        [
                                            "#!/bin/bash -xe",
                                            "\n",
                                            "",
                                            "\n",
                                            "# System imposed global limit",
                                            "\n",
                                            "FILES_MAX=$(cat /proc/sys/fs/file-max)",
                                            "\n",
                                            "",
                                            "\n",
                                            "if [[ ! $FILES_MAX =~ ^[0-9]+$ ]]; then",
                                            "\n",
                                            "    echo WARNING: Unable to determine file max for this system",
                                            "\n",
                                            "    exit 0",
                                            "\n",
                                            "fi",
                                            "\n",
                                            "",
                                            "\n",
                                            "# Per user limit",
                                            "\n",
                                            "let \"USER_LIMIT=$FILES_MAX/3\"",
                                            "\n",
                                            "",
                                            "\n",
                                            "if [ $USER_LIMIT -lt 4096 ]; then",
                                            "\n",
                                            "    USER_LIMIT=4096",
                                            "\n",
                                            "fi",
                                            "\n",
                                            "",
                                            "\n",
                                            "if [ $USER_LIMIT -gt 200000 ]; then",
                                            "\n",
                                            "    USER_LIMIT=200000",
                                            "\n",
                                            "fi",
                                            "\n",
                                            "",
                                            "\n",
                                            "ulimit -n $USER_LIMIT",
                                            "\n"
                                        ]
                                    ]
                                },
                                "group": "root"
                            }
                        },
                        "commands": {
                            "00removebackup": {
                                "command": "rm -f /etc/elasticbeanstalk/set-ulimit.sh.bak*"
                            }
                        }
                    }
                },
                "AWS::CloudFormation::Designer": {
                    "id": "2e6b6b5a-cd0e-46c0-b888-ee0922c07520"
                }
            },
            "Type": "AWS::AutoScaling::AutoScalingGroup",
            "DependsOn": "AWSEBBeanstalkMetadata",
            "Properties": {
                "LoadBalancerNames": [
                    {
                        "Ref": "AWSEBLoadBalancer"
                    }
                ],
                "MinSize": "1",
                "LaunchConfigurationName": {
                    "Ref": "AWSEBAutoScalingLaunchConfiguration"
                },
                "AvailabilityZones": [
                    "us-east-1c",
                    "us-east-1d"
                ],
                "Cooldown": "360",
                "VPCZoneIdentifier": [
                    "subnet-0ac3686d",
                    "subnet-d63f958a"
                ],
                "MaxSize": "4",
                "Tags": [
                    {
                        "Value": {
                            "Ref": "AWSEBEnvironmentName"
                        },
                        "Key": "elasticbeanstalk:environment-name",
                        "PropagateAtLaunch": true
                    },
                    {
                        "Value": {
                            "Ref": "AWSEBEnvironmentName"
                        },
                        "Key": "Name",
                        "PropagateAtLaunch": true
                    },
                    {
                        "Value": {
                            "Ref": "AWSEBEnvironmentId"
                        },
                        "Key": "elasticbeanstalk:environment-id",
                        "PropagateAtLaunch": true
                    }
                ]
            }
        },
        "AWSEBInstanceLaunchWaitCondition": {
            "Type": "AWS::CloudFormation::WaitCondition",
            "DependsOn": "AWSEBAutoScalingGroup",
            "Properties": {
                "Timeout": "900",
                "Count": "1",
                "Handle": {
                    "Ref": "AWSEBInstanceLaunchWaitHandle"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "cf51922e-2336-41be-aa96-9122a396c8ee"
                }
            }
        },
        "AWSEBRDSDBSubnetGroup": {
            "Properties": {
                "DBSubnetGroupDescription": "RDS DB Subnet Group",
                "SubnetIds": [
                    "subnet-0ac3686d",
                    "subnet-d63f958a"
                ]
            },
            "Type": "AWS::RDS::DBSubnetGroup",
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "d3832b9c-1f97-42b2-98dd-d3a83ae4ee50"
                }
            }
        },
        "AWSEBUpdateWaitConditionHandleKnqwvi": {
            "Type": "AWS::CloudFormation::WaitConditionHandle",
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "0f132c6b-1bfb-4f76-a882-3aa7533e1cc0"
                }
            }
        },
        "AWSEBAutoScalingScaleUpPolicy": {
            "Properties": {
                "ScalingAdjustment": "1",
                "AutoScalingGroupName": {
                    "Ref": "AWSEBAutoScalingGroup"
                },
                "AdjustmentType": "ChangeInCapacity"
            },
            "Type": "AWS::AutoScaling::ScalingPolicy",
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "0ccd8cf2-3c92-431e-82bc-00171e8321e8"
                }
            }
        },
        "AWSEBCloudwatchAlarmHigh": {
            "Properties": {
                "AlarmActions": [
                    {
                        "Ref": "AWSEBAutoScalingScaleUpPolicy"
                    }
                ],
                "MetricName": "NetworkOut",
                "ComparisonOperator": "GreaterThanThreshold",
                "Statistic": "Average",
                "AlarmDescription": "ElasticBeanstalk Default Scale Up alarm",
                "Period": "300",
                "Dimensions": [
                    {
                        "Value": {
                            "Ref": "AWSEBAutoScalingGroup"
                        },
                        "Name": "AutoScalingGroupName"
                    }
                ],
                "EvaluationPeriods": "1",
                "Namespace": "AWS/EC2",
                "Threshold": "6000000"
            },
            "Type": "AWS::CloudWatch::Alarm",
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "51c9d33f-fe36-41c0-9d49-b78a066e9b7e"
                }
            }
        },
        "AWSEBBeanstalkMetadata": {
            "Metadata": {
                "AWS::ElasticBeanstalk::Ext": {
                    "Parameters": {
                        "AWSEBDBPassword": {
                            "Ref": "AWSEBDBPassword"
                        },
                        "InstanceTypeFamily": {
                            "Ref": "InstanceTypeFamily"
                        },
                        "LogPublicationControl": {
                            "Ref": "LogPublicationControl"
                        },
                        "DocumentRoot": {
                            "Ref": "DocumentRoot"
                        },
                        "InstancePort": {
                            "Ref": "InstancePort"
                        },
                        "DisplayErrors": {
                            "Ref": "DisplayErrors"
                        },
                        "AWSEBEnvironmentId": {
                            "Ref": "AWSEBEnvironmentId"
                        },
                        "HooksPkgUrl": {
                            "Ref": "HooksPkgUrl"
                        },
                        "ZlibOutputCompression": {
                            "Ref": "ZlibOutputCompression"
                        },
                        "AWSEBEnvironmentName": {
                            "Ref": "AWSEBEnvironmentName"
                        },
                        "AWSEBReferrerId": {
                            "Ref": "AWSEBReferrerId"
                        },
                        "AppSource": {
                            "Ref": "AppSource"
                        },
                        "MaxExecutionTime": {
                            "Ref": "MaxExecutionTime"
                        },
                        "MemoryLimit": {
                            "Ref": "MemoryLimit"
                        },
                        "AWSEBDBName": {
                            "Ref": "AWSEBDBName"
                        },
                        "EnvironmentVariables": {
                            "Ref": "EnvironmentVariables"
                        },
                        "AWSEBDBUser": {
                            "Ref": "AWSEBDBUser"
                        },
                        "AllowUrlFopen": {
                            "Ref": "AllowUrlFopen"
                        },
                        "AWSEBAgentId": {
                            "Ref": "AWSEBAgentId"
                        },
                        "ComposerOptions": {
                            "Ref": "ComposerOptions"
                        },
                        "InstanceType": {
                            "Ref": "InstanceType"
                        },
                        "AWSEBEnvironmentBucket": {
                            "Ref": "AWSEBEnvironmentBucket"
                        }
                    }
                },
                "AWS::ElasticBeanstalk::Metadata": {
                    "EnvironmentId": "e-smyb7aynmq",
                    "RequestId": "cf087579-aac4-11e8-8274-df68c3fb7408",
                    "Version": "cf087579-aac4-11e8-8274-df68c3fb7408",
                    "EnvironmentName": "Myapp1-env",
                    "DateUpdated": "2018-08-28T13:18:09",
                    "DateCreated": "2018-08-28T12:11:28",
                    "DeploymentVersion": 2,
                    "DateLastModified": "2018-08-28T13:18:16",
                    "Name": "e-smyb7aynmq"
                },
                "AWS::CloudFormation::Designer": {
                    "id": "e03fbccc-1fac-45bf-b015-7304eaf55ab1"
                }
            },
            "Type": "AWS::CloudFormation::WaitConditionHandle"
        },
        "AWSEBCloudwatchAlarmLow": {
            "Properties": {
                "AlarmActions": [
                    {
                        "Ref": "AWSEBAutoScalingScaleDownPolicy"
                    }
                ],
                "MetricName": "NetworkOut",
                "ComparisonOperator": "LessThanThreshold",
                "Statistic": "Average",
                "AlarmDescription": "ElasticBeanstalk Default Scale Down alarm",
                "Period": "300",
                "Dimensions": [
                    {
                        "Value": {
                            "Ref": "AWSEBAutoScalingGroup"
                        },
                        "Name": "AutoScalingGroupName"
                    }
                ],
                "EvaluationPeriods": "1",
                "Namespace": "AWS/EC2",
                "Threshold": "2000000"
            },
            "Type": "AWS::CloudWatch::Alarm",
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "f26709a2-f8b1-454e-b4aa-78d8d737c5e7"
                }
            }
        },
        "AWSEBUpdateWaitConditionKnqwvi": {
            "Type": "AWS::CloudFormation::WaitCondition",
            "DependsOn": [
                "AWSEBRDSDBSecurityGroup",
                "AWSEBSecurityGroupSSHIngress",
                "AWSEBAutoScalingLaunchConfiguration",
                "AWSEBLoadBalancer",
                "AWSEBLoadBalancerSecurityGroup",
                "AWSEBSecurityGroup",
                "AWSEBAutoScalingScaleDownPolicy",
                "AWSEBInstanceLaunchWaitHandle",
                "AWSEBRDSDatabase",
                "AWSEBAutoScalingGroup",
                "AWSEBInstanceLaunchWaitCondition",
                "AWSEBRDSDBSubnetGroup",
                "AWSEBAutoScalingScaleUpPolicy",
                "AWSEBCloudwatchAlarmHigh",
                "AWSEBBeanstalkMetadata",
                "AWSEBCloudwatchAlarmLow"
            ],
            "Properties": {
                "Timeout": "43200",
                "Count": "1",
                "Handle": {
                    "Ref": "AWSEBUpdateWaitConditionHandleKnqwvi"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "877b13b5-1cd6-45ba-b5d7-f8e3c3261dac"
                }
            }
        }
    },
    "Description": "AWS Elastic Beanstalk environment (Name: 'Myapp1-env'  Id: 'e-smyb7aynmq')",
    "Mappings": {
        "AWSEBAWSRegionArch2AMIBase": {
            "ap-south-1": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-5a8da735"
            },
            "eu-west-3": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-d50bbaa8"
            },
            "DEVO": {
                "pv": "",
                "graphics": "ami-4c228033",
                "gpu": "ami-8482c6ec",
                "hvm": "ami-cfe4b2b0"
            },
            "eu-west-2": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-b2b55cd5"
            },
            "eu-west-1": {
                "pv": "",
                "graphics": "ami-e0e2c399",
                "gpu": "ami-21ce4256",
                "hvm": "ami-e4515e0e"
            },
            "ap-northeast-3": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-09b8b674"
            },
            "ap-northeast-2": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-ebc47185"
            },
            "ap-northeast-1": {
                "pv": "",
                "graphics": "ami-62dcc41e",
                "gpu": "",
                "hvm": "ami-9c9443e3"
            },
            "sa-east-1": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-83d58fef"
            },
            "ca-central-1": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-03e86a67"
            },
            "cn-north-1": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-f8d00995"
            },
            "us-gov-west-1": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-5162f230"
            },
            "ap-southeast-1": {
                "pv": "",
                "graphics": "ami-ba93b0c6",
                "gpu": "",
                "hvm": "ami-ed838091"
            },
            "ap-southeast-2": {
                "pv": "",
                "graphics": "ami-41d91223",
                "gpu": "",
                "hvm": "ami-33f92051"
            },
            "eu-central-1": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-a058674b"
            },
            "us-east-1": {
                "pv": "",
                "graphics": "ami-4c228033",
                "gpu": "ami-8482c6ec",
                "hvm": "ami-cfe4b2b0"
            },
            "us-east-2": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-40142d25"
            },
            "us-west-1": {
                "pv": "",
                "graphics": "ami-abf1e3cb",
                "gpu": "",
                "hvm": "ami-0e86606d"
            },
            "cn-northwest-1": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-915d4af3"
            },
            "us-west-2": {
                "pv": "",
                "graphics": "ami-ad90fcd5",
                "gpu": "",
                "hvm": "ami-0ad99772"
            }
        },
        "AWSEBOptions": {
            "options": {
                "OptionDefinitionOverrideEnabled": true,
                "AWSEBHealthdGroupId": "2f8364da-e360-4d87-a58d-e30e3bdad4a9",
                "HaltStartupCommandsOnFailure": "true",
                "SystemType": "enhanced",
                "UserDataScript": "https://s3.dualstack.us-east-1.amazonaws.com/elasticbeanstalk-env-resources-us-east-1/stalks/eb_php_4.0.1.200177.0/lib/UserDataScript.sh",
                "LaunchType": "Migration",
                "ebgems": "https://s3.dualstack.us-east-1.amazonaws.com/elasticbeanstalk-env-resources-us-east-1/stalks/eb_php_4.0.1.200177.0/lib/beanstalk-core-2.12.gem https://s3.dualstack.us-east-1.amazonaws.com/elasticbeanstalk-env-resources-us-east-1/stalks/eb_php_4.0.1.200177.0/lib/beanstalk-core-healthd-1.1.gem https://s3.dualstack.us-east-1.amazonaws.com/elasticbeanstalk-env-resources-us-east-1/stalks/eb_php_4.0.1.200177.0/lib/executor-1.2.gem",
                "tarballs": "https://s3.dualstack.us-east-1.amazonaws.com/elasticbeanstalk-env-resources-us-east-1/stalks/eb_php_4.0.1.200177.0/lib/awseb-ruby-2.2.4-x86_64-20160503_1008.tar.gz https://s3.dualstack.us-east-1.amazonaws.com/elasticbeanstalk-env-resources-us-east-1/stalks/eb_php_4.0.1.200177.0/lib/basehooks.tar.gz",
                "rpms": "https://s3.dualstack.us-east-1.amazonaws.com/elasticbeanstalk-env-resources-us-east-1/stalks/eb_php_4.0.1.200177.0/lib/aws-elasticbeanstalk-tools-1.20-1.noarch.rpm",
                "PhpVersion": "7.2",
                "FastVersionDeployment": "true",
                "ServiceRole": "aws-elasticbeanstalk-service-role",
                "HealthdProxyLogLocation": "",
                "CommandBasedLeaderElection": "true",
                "CloudConfigOptions": "cloud_final_modules:\n - [scripts-user, always]",
                "DefaultsScript": "/opt/elasticbeanstalk/support/containerDefaults",
                "LeaderTestScript": "/opt/elasticbeanstalk/bin/leader-test.sh",
                "downloadSourceBundleScriptLocation": [
                    "https://s3.amazonaws.com/elasticbeanstalk-env-resources-us-east-1/eb_patching_resources/download_source_bundle.py"
                ],
                "DefaultSSHPort": "22",
                "ProxyServer": "httpd",
                "AWSEBHealthdEndpoint": "",
                "EmbeddedConfigsetsEnabled": "true",
                "EBSNSTopicArn": "arn:aws:sns:us-east-1:856813880062:ElasticBeanstalkNotifications-Environment-Myapp1-env",
                "guid": "db85d4430b02",
                "nodeploymentOnStartup": "true",
                "ebpatchscripturl": [
                    "https://s3.amazonaws.com/elasticbeanstalk-env-resources-us-east-1/eb_patching_resources/patch_instance.py"
                ]
            }
        },
        "AWSEBAWSRegionArch2AMI": {
            "ap-south-1": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-5a8da735"
            },
            "eu-west-3": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-d50bbaa8"
            },
            "DEVO": {
                "pv": "",
                "graphics": "ami-4c228033",
                "gpu": "ami-8482c6ec",
                "hvm": "ami-cfe4b2b0"
            },
            "eu-west-2": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-b2b55cd5"
            },
            "eu-west-1": {
                "pv": "",
                "graphics": "ami-e0e2c399",
                "gpu": "ami-21ce4256",
                "hvm": "ami-e4515e0e"
            },
            "ap-northeast-3": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-09b8b674"
            },
            "ap-northeast-2": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-ebc47185"
            },
            "ap-northeast-1": {
                "pv": "",
                "graphics": "ami-62dcc41e",
                "gpu": "",
                "hvm": "ami-9c9443e3"
            },
            "sa-east-1": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-83d58fef"
            },
            "ca-central-1": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-03e86a67"
            },
            "cn-north-1": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-f8d00995"
            },
            "us-gov-west-1": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-5162f230"
            },
            "ap-southeast-1": {
                "pv": "",
                "graphics": "ami-ba93b0c6",
                "gpu": "",
                "hvm": "ami-ed838091"
            },
            "ap-southeast-2": {
                "pv": "",
                "graphics": "ami-41d91223",
                "gpu": "",
                "hvm": "ami-33f92051"
            },
            "eu-central-1": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-a058674b"
            },
            "us-east-1": {
                "pv": "",
                "graphics": "ami-4c228033",
                "gpu": "ami-8482c6ec",
                "hvm": "ami-0a42690ca13ea220d"
            },
            "us-east-2": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-40142d25"
            },
            "us-west-1": {
                "pv": "",
                "graphics": "ami-abf1e3cb",
                "gpu": "",
                "hvm": "ami-0e86606d"
            },
            "cn-northwest-1": {
                "pv": "",
                "graphics": "",
                "gpu": "",
                "hvm": "ami-915d4af3"
            },
            "us-west-2": {
                "pv": "",
                "graphics": "ami-ad90fcd5",
                "gpu": "",
                "hvm": "ami-0ad99772"
            }
        },
        "AWSEBAWSInstanceTypeFamily2Arch": {
            "r5d": {
                "Arch": "hvm"
            },
            "r3": {
                "Arch": "hvm"
            },
            "r4": {
                "Arch": "hvm"
            },
            "p2": {
                "Arch": "hvm"
            },
            "p3": {
                "Arch": "hvm"
            },
            "r5": {
                "Arch": "hvm"
            },
            "hs1": {
                "Arch": "hvm"
            },
            "h1": {
                "Arch": "hvm"
            },
            "f1": {
                "Arch": "hvm"
            },
            "cg1": {
                "Arch": "hvm"
            },
            "z1d": {
                "Arch": "hvm"
            },
            "x1e": {
                "Arch": "hvm"
            },
            "d2": {
                "Arch": "hvm"
            },
            "cc1": {
                "Arch": "hvm"
            },
            "hi1": {
                "Arch": "hvm"
            },
            "cc2": {
                "Arch": "hvm"
            },
            "cr1": {
                "Arch": "hvm"
            },
            "m1": {
                "Arch": "hvm"
            },
            "m2": {
                "Arch": "hvm"
            },
            "m3": {
                "Arch": "hvm"
            },
            "m4": {
                "Arch": "hvm"
            },
            "m5": {
                "Arch": "hvm"
            },
            "i2": {
                "Arch": "hvm"
            },
            "i3": {
                "Arch": "hvm"
            },
            "g2": {
                "Arch": "graphics"
            },
            "g3": {
                "Arch": "hvm"
            },
            "c1": {
                "Arch": "hvm"
            },
            "c3": {
                "Arch": "hvm"
            },
            "c4": {
                "Arch": "hvm"
            },
            "c5": {
                "Arch": "hvm"
            },
            "c5d": {
                "Arch": "hvm"
            },
            "x1": {
                "Arch": "hvm"
            },
            "t1": {
                "Arch": "hvm"
            },
            "m5d": {
                "Arch": "hvm"
            },
            "t2": {
                "Arch": "hvm"
            }
        },
        "EnvironmentInfoTasks": {
            "systemtail": {
                "LocationPrefix": "resources/environments/logs/systemtail/",
                "AutoClean": "true",
                "CommandName": "CMD-SystemTailLogs"
            },
            "tail": {
                "LocationPrefix": "resources/environments/logs/tail/",
                "AutoClean": "true",
                "CommandName": "CMD-TailLogs"
            },
            "publish": {
                "LocationPrefix": "resources/environments/logs/publish/"
            },
            "bundle": {
                "LocationPrefix": "resources/environments/logs/bundle/",
                "AutoClean": "true",
                "CommandName": "CMD-BundleLogs"
            }
        },
        "ContainerMeta": {
            "AMIMeta": {
                "RepoReleaseVersion": "2018.03",
                "AMIVersion": "2018.03.0"
            }
        }
    },
    "Metadata": {
        "AWS::CloudFormation::Designer": {
            "e03fbccc-1fac-45bf-b015-7304eaf55ab1": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 360,
                    "y": 90
                },
                "z": 1,
                "embeds": []
            },
            "0f132c6b-1bfb-4f76-a882-3aa7533e1cc0": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 360,
                    "y": 210
                },
                "z": 1,
                "embeds": []
            },
            "d3832b9c-1f97-42b2-98dd-d3a83ae4ee50": {
                "size": {
                    "width": 240,
                    "height": 240
                },
                "position": {
                    "x": 30,
                    "y": 110
                },
                "z": 1,
                "embeds": [
                    "e0efa243-5e86-4f3a-ac76-0c592f46ca73"
                ]
            },
            "88b87df4-fca2-4aa8-b0b3-2053f149fd2c": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 360,
                    "y": 330
                },
                "z": 1,
                "embeds": []
            },
            "7149b139-06eb-4a3b-879a-cfa9b5e8b7e1": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 60,
                    "y": 390
                },
                "z": 1,
                "embeds": []
            },
            "a3d701db-6fc5-48d3-930f-5b38e75f3b66": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 180,
                    "y": 390
                },
                "z": 1,
                "embeds": []
            },
            "b46b3e6f-0a74-4822-8a1a-b0b820bbf3f7": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 480,
                    "y": 90
                },
                "z": 1,
                "embeds": [],
                "isassociatedwith": [
                    "7149b139-06eb-4a3b-879a-cfa9b5e8b7e1"
                ]
            },
            "020160c1-0b81-432b-a906-0c3246c3add1": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 480,
                    "y": 210
                },
                "z": 1,
                "embeds": [],
                "isassociatedwith": [
                    "a3d701db-6fc5-48d3-930f-5b38e75f3b66"
                ]
            },
            "2e6b6b5a-cd0e-46c0-b888-ee0922c07520": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 480,
                    "y": 330
                },
                "z": 1,
                "embeds": [],
                "isassociatedwith": [
                    "020160c1-0b81-432b-a906-0c3246c3add1",
                    "b46b3e6f-0a74-4822-8a1a-b0b820bbf3f7"
                ],
                "dependson": [
                    "e03fbccc-1fac-45bf-b015-7304eaf55ab1"
                ]
            },
            "0ccd8cf2-3c92-431e-82bc-00171e8321e8": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 300,
                    "y": 450
                },
                "z": 1,
                "embeds": [],
                "isassociatedwith": [
                    "2e6b6b5a-cd0e-46c0-b888-ee0922c07520"
                ]
            },
            "51c9d33f-fe36-41c0-9d49-b78a066e9b7e": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 420,
                    "y": 450
                },
                "z": 1,
                "embeds": []
            },
            "cf51922e-2336-41be-aa96-9122a396c8ee": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 540,
                    "y": 450
                },
                "z": 1,
                "embeds": [],
                "isassociatedwith": [
                    "88b87df4-fca2-4aa8-b0b3-2053f149fd2c"
                ],
                "dependson": [
                    "2e6b6b5a-cd0e-46c0-b888-ee0922c07520"
                ]
            },
            "f7ea72f3-fa7f-4baa-ba23-9ad7a4c89a82": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 60,
                    "y": 510
                },
                "z": 1,
                "embeds": [],
                "isassociatedwith": [
                    "2e6b6b5a-cd0e-46c0-b888-ee0922c07520"
                ]
            },
            "f26709a2-f8b1-454e-b4aa-78d8d737c5e7": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 180,
                    "y": 510
                },
                "z": 1,
                "embeds": []
            },
            "27a9cce2-ddce-4533-95a1-7f11c071dc56": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 300,
                    "y": 570
                },
                "z": 1,
                "embeds": [],
                "isassociatedwith": [
                    "a3d701db-6fc5-48d3-930f-5b38e75f3b66"
                ]
            },
            "e0efa243-5e86-4f3a-ac76-0c592f46ca73": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 60,
                    "y": 170
                },
                "z": 2,
                "parent": "d3832b9c-1f97-42b2-98dd-d3a83ae4ee50",
                "embeds": [],
                "isassociatedwith": [
                    "27a9cce2-ddce-4533-95a1-7f11c071dc56"
                ],
                "iscontainedinside": [
                    "d3832b9c-1f97-42b2-98dd-d3a83ae4ee50"
                ]
            },
            "877b13b5-1cd6-45ba-b5d7-f8e3c3261dac": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 420,
                    "y": 570
                },
                "z": 1,
                "embeds": [],
                "isassociatedwith": [
                    "0f132c6b-1bfb-4f76-a882-3aa7533e1cc0"
                ],
                "dependson": [
                    "27a9cce2-ddce-4533-95a1-7f11c071dc56",
                    "020160c1-0b81-432b-a906-0c3246c3add1",
                    "b46b3e6f-0a74-4822-8a1a-b0b820bbf3f7",
                    "7149b139-06eb-4a3b-879a-cfa9b5e8b7e1",
                    "a3d701db-6fc5-48d3-930f-5b38e75f3b66",
                    "f7ea72f3-fa7f-4baa-ba23-9ad7a4c89a82",
                    "88b87df4-fca2-4aa8-b0b3-2053f149fd2c",
                    "e0efa243-5e86-4f3a-ac76-0c592f46ca73",
                    "2e6b6b5a-cd0e-46c0-b888-ee0922c07520",
                    "cf51922e-2336-41be-aa96-9122a396c8ee",
                    "d3832b9c-1f97-42b2-98dd-d3a83ae4ee50",
                    "0ccd8cf2-3c92-431e-82bc-00171e8321e8",
                    "51c9d33f-fe36-41c0-9d49-b78a066e9b7e",
                    "e03fbccc-1fac-45bf-b015-7304eaf55ab1",
                    "f26709a2-f8b1-454e-b4aa-78d8d737c5e7"
                ]
            }
        }
    }
}